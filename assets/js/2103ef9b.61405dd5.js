"use strict";(self.webpackChunkpush_website=self.webpackChunkpush_website||[]).push([[84714],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return h}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=d(n),m=r,h=u["".concat(s,".").concat(m)]||u[m]||c[m]||o;return n?a.createElement(h,i(i({ref:t},p),{},{components:n})):a.createElement(h,i({ref:t},p))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:r,i[1]=l;for(var d=2;d<o;d++)i[d]=n[d];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},85162:function(e,t,n){n.d(t,{Z:function(){return i}});var a=n(67294),r=n(86010),o={tabItem:"tabItem_Ymn6"};function i(e){var t=e.children,n=e.hidden,i=e.className;return a.createElement("div",{role:"tabpanel",className:(0,r.default)(o.tabItem,i),hidden:n},t)}},74866:function(e,t,n){n.d(t,{Z:function(){return C}});var a=n(87462),r=n(67294),o=n(86010),i=n(12466),l=n(16550),s=n(91980),d=n(67392),p=n(50012);function u(e){return function(e){var t,n;return null!==(t=null===(n=r.Children.map(e,(function(e){if(!e||(0,r.isValidElement)(e)&&(t=e.props)&&"object"==typeof t&&"value"in t)return e;var t;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))||void 0===n?void 0:n.filter(Boolean))&&void 0!==t?t:[]}(e).map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes,default:t.default}}))}function c(e){var t=e.values,n=e.children;return(0,r.useMemo)((function(){var e=null!=t?t:u(n);return function(e){var t=(0,d.l)(e,(function(e,t){return e.value===t.value}));if(t.length>0)throw new Error('Docusaurus error: Duplicate values "'+t.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[t,n])}function m(e){var t=e.value;return e.tabValues.some((function(e){return e.value===t}))}function h(e){var t=e.queryString,n=void 0!==t&&t,a=e.groupId,o=(0,l.k6)(),i=function(e){var t=e.queryString,n=void 0!==t&&t,a=e.groupId;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=a?a:null}({queryString:n,groupId:a});return[(0,s._X)(i),(0,r.useCallback)((function(e){if(i){var t=new URLSearchParams(o.location.search);t.set(i,e),o.replace(Object.assign({},o.location,{search:t.toString()}))}}),[i,o])]}function g(e){var t,n,a,o,i=e.defaultValue,l=e.queryString,s=void 0!==l&&l,d=e.groupId,u=c(e),g=(0,r.useState)((function(){return function(e){var t,n=e.defaultValue,a=e.tabValues;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!m({value:n,tabValues:a}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+n+'" but none of its children has the corresponding value. Available values are: '+a.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return n}var r=null!==(t=a.find((function(e){return e.default})))&&void 0!==t?t:a[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:i,tabValues:u})})),k=g[0],f=g[1],N=h({queryString:s,groupId:d}),y=N[0],b=N[1],C=(t=function(e){return e?"docusaurus.tab."+e:null}({groupId:d}.groupId),n=(0,p.Nk)(t),a=n[0],o=n[1],[a,(0,r.useCallback)((function(e){t&&o.set(e)}),[t,o])]),v=C[0],w=C[1],E=function(){var e=null!=y?y:v;return m({value:e,tabValues:u})?e:null}();return(0,r.useLayoutEffect)((function(){E&&f(E)}),[E]),{selectedValue:k,selectValue:(0,r.useCallback)((function(e){if(!m({value:e,tabValues:u}))throw new Error("Can't select invalid tab value="+e);f(e),b(e),w(e)}),[b,w,u]),tabValues:u}}var k=n(72389),f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function N(e){var t=e.className,n=e.block,l=e.selectedValue,s=e.selectValue,d=e.tabValues,p=[],u=(0,i.o5)().blockElementScrollPositionUntilNextRender,c=function(e){var t=e.currentTarget,n=p.indexOf(t),a=d[n].value;a!==l&&(u(t),s(a))},m=function(e){var t,n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":var a,r=p.indexOf(e.currentTarget)+1;n=null!==(a=p[r])&&void 0!==a?a:p[0];break;case"ArrowLeft":var o,i=p.indexOf(e.currentTarget)-1;n=null!==(o=p[i])&&void 0!==o?o:p[p.length-1]}null===(t=n)||void 0===t||t.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.default)("tabs",{"tabs--block":n},t)},d.map((function(e){var t=e.value,n=e.label,i=e.attributes;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:l===t?0:-1,"aria-selected":l===t,key:t,ref:function(e){return p.push(e)},onKeyDown:m,onClick:c},i,{className:(0,o.default)("tabs__item",f.tabItem,null==i?void 0:i.className,{"tabs__item--active":l===t})}),null!=n?n:t)})))}function y(e){var t=e.lazy,n=e.children,a=e.selectedValue,o=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){var i=o.find((function(e){return e.props.value===a}));return i?(0,r.cloneElement)(i,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},o.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a})})))}function b(e){var t=g(e);return r.createElement("div",{className:(0,o.default)("tabs-container",f.tabList)},r.createElement(N,(0,a.Z)({},e,t)),r.createElement(y,(0,a.Z)({},e,t)))}function C(e){var t=(0,k.Z)();return r.createElement(b,(0,a.Z)({key:String(t)},e))}},33984:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return h},frontMatter:function(){return l},metadata:function(){return d},toc:function(){return u}});var a=n(87462),r=n(63366),o=(n(67294),n(3905)),i=(n(74866),n(85162),n(23734),["components"]),l={id:"docs-chat-develop-conditional-rules-for-group",title:"Conditional Rules for Group",hide_title:!0,slug:"./conditional-rules-for-group",displayed_sidebar:"pushChatSidebar",sidebar_position:10,image:"/assets/docs/previews/docs_chat_develop--conditional_rules_for_group.png"},s="What is conditional gating",d={unversionedId:"chat/build/docs-chat-develop-conditional-rules-for-group",id:"chat/build/docs-chat-develop-conditional-rules-for-group",title:"Conditional Rules for Group",description:"Conditional gating allows you to define rules for the members of the group for different privileges / permissions such as entry or chat. It is driven by Push Chat rules engine which is inspired by json rules engine and allows you to create powerful dynamics guiding communication for your community. Some examples of what you can achieve with it \u2014",source:"@site/docs/chat/01-build/10-Develop-Conditional-Rule-For-Groups.mdx",sourceDirName:"chat/01-build",slug:"/chat/build/conditional-rules-for-group",permalink:"/docs/chat/build/conditional-rules-for-group",draft:!1,editUrl:"https://github.com/ethereum-push-notification-service/push-website/blob/main/docs/chat/01-build/10-Develop-Conditional-Rule-For-Groups.mdx",tags:[],version:"current",sidebarPosition:10,frontMatter:{id:"docs-chat-develop-conditional-rules-for-group",title:"Conditional Rules for Group",hide_title:!0,slug:"./conditional-rules-for-group",displayed_sidebar:"pushChatSidebar",sidebar_position:10,image:"/assets/docs/previews/docs_chat_develop--conditional_rules_for_group.png"},sidebar:"pushChatSidebar",previous:{title:"Group Permissions",permalink:"/docs/chat/build/group-permissions"},next:{title:"Manage Group",permalink:"/docs/chat/build/manage-group"}},p={},u=[{value:"Understanding the rules object",id:"understanding-the-rules-object",level:2},{value:"Overview",id:"overview",level:3},{value:"Rules object Parameters",id:"rules-object-parameters",level:3},{value:"Criteria object Parameters",id:"criteria-object-parameters",level:3},{value:"When using type - <code>PUSH</code>",id:"when-using-type---push",level:4},{value:"Use Case Example - Token gated community",id:"use-case-example---token-gated-community",level:2},{value:"Problem Statement",id:"problem-statement",level:3},{value:"Solution",id:"solution",level:3},{value:"Token gated group and send message example",id:"token-gated-group-and-send-message-example",level:2},{value:"NFT gated group example",id:"nft-gated-group-example",level:2},{value:"NFT gated group github example repo",id:"nft-gated-group-github-example-repo",level:2}],c={toc:u},m="wrapper";function h(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)(m,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"what-is-conditional-gating"},"What is conditional gating"),(0,o.kt)("p",null,"Conditional gating allows you to define rules for the members of the group for different privileges / permissions such as ",(0,o.kt)("inlineCode",{parentName:"p"},"entry")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"chat"),". It is driven by Push Chat rules engine which is inspired by json rules engine and allows you to create powerful dynamics guiding communication for your community. Some examples of what you can achieve with it \u2014"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Creating token gated group")," - ie: user needs to hold XX token to join the group"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Creating nft gated group")," - ie: user needs to hold XX NFT to join the gorup"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Defining multi-chain conditions")," - ie: user can join the group if they have 5 tokens on Ethereum or 10 tokens on Polygon"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Defining sending message conditions")," - ie: user needs 1 token to join the group but 100 to send message"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Defining non-web3 conditions using Guild")," - ie: user needs to follow ",(0,o.kt)("inlineCode",{parentName:"li"},"@pushprotocol")," on twitter to be able to join the group"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Creating game theories by combining one or multiple conditions")," - ie: you need 1 token on any chain to join the group but sending messages require you to hold 1000 tokens or 1 NFT or 20 POAPs, etc")),(0,o.kt)("head",null,(0,o.kt)("title",null,"Conditional Gating of Group | Push Chat | Push Documentation")),(0,o.kt)("h2",{id:"understanding-the-rules-object"},"Understanding the rules object"),(0,o.kt)("p",null,"The ",(0,o.kt)("strong",{parentName:"p"},"rules")," object is an optional parameter that you pass in ",(0,o.kt)("a",{parentName:"p",href:"/docs/chat/build/create-group"},"create group API call")," to conditional gate ",(0,o.kt)("strong",{parentName:"p"},"joining")," or ",(0,o.kt)("strong",{parentName:"p"},"sending message")," in group chat."),(0,o.kt)("h3",{id:"overview"},"Overview"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"rules"),(0,o.kt)("br",null),"\n\u251c ",(0,o.kt)("inlineCode",{parentName:"p"},"permission")," - ",(0,o.kt)("inlineCode",{parentName:"p"},"entry")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"chat"),(0,o.kt)("br",null),"\n","\u2003","\u2514 ",(0,o.kt)("inlineCode",{parentName:"p"},"conditions"),(0,o.kt)("br",null),"\n","\u2003","\u2003","\u2514 ",(0,o.kt)("inlineCode",{parentName:"p"},"decider")," - ",(0,o.kt)("inlineCode",{parentName:"p"},"any")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"all"),(0,o.kt)("br",null),"\n","\u2003","\u2003","\u2003","\u2514",(0,o.kt)("inlineCode",{parentName:"p"},"condition a")," - ",(0,o.kt)("inlineCode",{parentName:"p"},"any")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"all"),(0,o.kt)("br",null),"\n","\u2003","\u2003","\u2003","\u2003","\u2514",(0,o.kt)("inlineCode",{parentName:"p"},"criteria 1"),(0,o.kt)("br",null),"\n","\u2003","\u2003","\u2003","\u2003","\u2514",(0,o.kt)("inlineCode",{parentName:"p"},"criteria 2"),(0,o.kt)("br",null),"\n","\u2003","\u2003","\u2003","\u2514",(0,o.kt)("inlineCode",{parentName:"p"},"condition b")," - ",(0,o.kt)("inlineCode",{parentName:"p"},"any")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"all"),(0,o.kt)("br",null),"\n","\u2003","\u2003","\u2003","\u2003","\u2514",(0,o.kt)("inlineCode",{parentName:"p"},"criteria 3"),(0,o.kt)("br",null)),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},(0,o.kt)("inlineCode",{parentName:"em"},"rules"))," object is made up of individual ",(0,o.kt)("strong",{parentName:"p"},"permissions")," that define privilages of the group. "),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},(0,o.kt)("inlineCode",{parentName:"em"},"permission"))," object contains ",(0,o.kt)("strong",{parentName:"p"},"conditions")," that needs to be satisfied."),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},(0,o.kt)("inlineCode",{parentName:"em"},"conditions"))," object is an array of one or more ",(0,o.kt)("strong",{parentName:"p"},"condition"),"."),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},(0,o.kt)("inlineCode",{parentName:"em"},"decider"))," the namespace (",(0,o.kt)("inlineCode",{parentName:"p"},"any")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"all"),") decides if all of the conditions or anyone of the condition needs to be fulfilled."),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},(0,o.kt)("inlineCode",{parentName:"em"},"condition"))," contains array of ",(0,o.kt)("strong",{parentName:"p"},"criteria"),", the namespace (",(0,o.kt)("inlineCode",{parentName:"p"},"any")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"all"),") decides if all criterias or anyone of the criteria needs to be fulfilled."),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},(0,o.kt)("inlineCode",{parentName:"em"},"criteria"))," is the atomic condition that has ",(0,o.kt)("strong",{parentName:"p"},"type"),", ",(0,o.kt)("strong",{parentName:"p"},"category"),", ",(0,o.kt)("strong",{parentName:"p"},"subcategory")," and ",(0,o.kt)("strong",{parentName:"p"},"data"),", based on which a particular condition is deemed as completed or failed."),(0,o.kt)("p",null,"To summarize, a list of ",(0,o.kt)("strong",{parentName:"p"},"criteria")," is created by you that is then defined inside ",(0,o.kt)("strong",{parentName:"p"},"decider")," to define their logical operation which is then passed in ",(0,o.kt)("strong",{parentName:"p"},"conditions")," of a particular ",(0,o.kt)("strong",{parentName:"p"},"permission"),". The list of individual ",(0,o.kt)("strong",{parentName:"p"},"permission")," is then attached to ",(0,o.kt)("strong",{parentName:"p"},"rules")," of the group to enable Push Chat rule engine to create dynamic communities with creative game theories."),(0,o.kt)("h3",{id:"rules-object-parameters"},"Rules object Parameters"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Param"),(0,o.kt)("th",{parentName:"tr",align:null},"Type"),(0,o.kt)("th",{parentName:"tr",align:null},"Subtype"),(0,o.kt)("th",{parentName:"tr",align:null},"Default"),(0,o.kt)("th",{parentName:"tr",align:null},"Remarks"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"rules")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"object")),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},"Rules object")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"rules.[permission]")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"object")),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},"Permissions object for specific privilege of the group. Multiple permission object can reside within ",(0,o.kt)("inlineCode",{parentName:"td"},"rules")," object")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"entry")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"object")),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},"Permissions object for specific privilege of the group. ",(0,o.kt)("inlineCode",{parentName:"td"},"entry")," permission conditionalizes joining a group")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"chat")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"object")),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},"Permissions object for specific privilege of the group. ",(0,o.kt)("inlineCode",{parentName:"td"},"chat")," permission conditionalizes sending a message in that group")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"rules.[permission].conditions")),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"array of objects")),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},"Contains array of all ",(0,o.kt)("inlineCode",{parentName:"td"},"condition")," objects")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"rules.[permission].conditions.[decider]")),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"object")),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},"Contains namespace ",(0,o.kt)("inlineCode",{parentName:"td"},"any")," or ",(0,o.kt)("inlineCode",{parentName:"td"},"all")," by which it's decided whether one condition or all condition needs to be fulfilled")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"rules.[permission].conditions.[decider].[condition]")),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"array of objects")),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},"Contains lists of criteria objects defined by ",(0,o.kt)("inlineCode",{parentName:"td"},"decider")," key, Valid ",(0,o.kt)("inlineCode",{parentName:"td"},"decider")," keys are ",(0,o.kt)("inlineCode",{parentName:"td"},"any")," or ",(0,o.kt)("inlineCode",{parentName:"td"},"all"),". ",(0,o.kt)("inlineCode",{parentName:"td"},"any")," will mean only one criteria needs to be fulfilled, ",(0,o.kt)("inlineCode",{parentName:"td"},"all")," means all criteria should pass")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"any")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"object")),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"any")," will mean only one criteria needs to be fulfilled from ",(0,o.kt)("inlineCode",{parentName:"td"},"rules.[permission].conditions.[condition]")," array")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"all")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"object")),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"all")," will mean only one criteria needs to be fulfilled from ",(0,o.kt)("inlineCode",{parentName:"td"},"rules.[permission].conditions.[condition]")," array")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"rules.[permission].conditions.[decider].[condition].[criteria]")),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"object")),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},"Individual criteria inside the ",(0,o.kt)("inlineCode",{parentName:"td"},"rules.[permission].conditions.[condition]")," array")))),(0,o.kt)("h3",{id:"criteria-object-parameters"},"Criteria object Parameters"),(0,o.kt)("p",null,"Criteria object supports multiple access control protocols which can have different conditions and rules, currently Push Chat supports ",(0,o.kt)("inlineCode",{parentName:"p"},"PUSH")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"GUILD")," type in criteria, owing to the way each individual protocol handles their respective ",(0,o.kt)("strong",{parentName:"p"},"type"),", ",(0,o.kt)("strong",{parentName:"p"},"category"),", ",(0,o.kt)("strong",{parentName:"p"},"subcategory")," and ",(0,o.kt)("strong",{parentName:"p"},"data"),", we are segregating the options and what they do for clarity."),(0,o.kt)("h4",{id:"when-using-type---push"},"When using type - ",(0,o.kt)("inlineCode",{parentName:"h4"},"PUSH")),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Param"),(0,o.kt)("th",{parentName:"tr",align:null},"Type"),(0,o.kt)("th",{parentName:"tr",align:null},"Subtype"),(0,o.kt)("th",{parentName:"tr",align:null},"Default"),(0,o.kt)("th",{parentName:"tr",align:null},"Remarks"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"[criteria]")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"object")),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},"-")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"type")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"string")),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},"Define the ",(0,o.kt)("inlineCode",{parentName:"td"},"type")," of the criteria, needs to be ",(0,o.kt)("inlineCode",{parentName:"td"},"PUSH")," for below category, subcategory to be applicable")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"category")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"string")," - can be ",(0,o.kt)("inlineCode",{parentName:"td"},"ERC20"),", ",(0,o.kt)("inlineCode",{parentName:"td"},"ERC721")," or ",(0,o.kt)("inlineCode",{parentName:"td"},"CustomEndpoint")),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},"Defines the category of the criteria, ",(0,o.kt)("inlineCode",{parentName:"td"},"ERC20")," means ERC-20 or normal token, ",(0,o.kt)("inlineCode",{parentName:"td"},"ERC721")," means ERC-721 or NFT tokens, ",(0,o.kt)("inlineCode",{parentName:"td"},"CustomEndpoint")," means a URL will be provided that results in 200 OK")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"subcategory")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"string")),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},"Further narrows down the condition that you want to run. For ",(0,o.kt)("inlineCode",{parentName:"td"},"ERC20")," or ",(0,o.kt)("inlineCode",{parentName:"td"},"ERC721")," - supported conditions are ",(0,o.kt)("inlineCode",{parentName:"td"},"holder")," or ",(0,o.kt)("inlineCode",{parentName:"td"},"owner")," which means that the criteria will check if a wallet is owner or holder. For ",(0,o.kt)("inlineCode",{parentName:"td"},"CustomEndpoint"),", the subcategory is ",(0,o.kt)("inlineCode",{parentName:"td"},"GET")," or ",(0,o.kt)("inlineCode",{parentName:"td"},"POST")," depending upon what HTTP request you want to use")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"data")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"object")),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},"define the data to be passed for checking conditions of criteria")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"contract")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"string")),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},"Only used for ",(0,o.kt)("inlineCode",{parentName:"td"},"ERC20")," or ",(0,o.kt)("inlineCode",{parentName:"td"},"ERC721")," category. Remember to define the contract in chain agnostic fashion. ",(0,o.kt)("strong",{parentName:"td"},"{chain_standard}:{chain_id}:{contract_address}"),", for example: ",(0,o.kt)("inlineCode",{parentName:"td"},"eip155:1:0xf418588522d5dd018b425E472991E52EBBeEEEEE")," points to $PUSH token on Ethereum mainnet while ",(0,o.kt)("inlineCode",{parentName:"td"},"eip155:137:0x58001cC1A9E17A20935079aB40B1B8f4Fc19EFd1")," points to $PUSH token on Polygon mainnet")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"comparison")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"string")," - supports ",(0,o.kt)("inlineCode",{parentName:"td"},"<="),", ",(0,o.kt)("inlineCode",{parentName:"td"},">="),", ",(0,o.kt)("inlineCode",{parentName:"td"},"==")),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},"Only used for ",(0,o.kt)("inlineCode",{parentName:"td"},"ERC20")," or ",(0,o.kt)("inlineCode",{parentName:"td"},"ERC721")," category. Define what comparison to use while comparing the data")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"amount")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"number")),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},"Only used for ",(0,o.kt)("inlineCode",{parentName:"td"},"ERC20")," or ",(0,o.kt)("inlineCode",{parentName:"td"},"ERC721")," category. Define the number to be passed in the amount")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"url")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"string")),(0,o.kt)("td",{parentName:"tr",align:null},"-"),(0,o.kt)("td",{parentName:"tr",align:null},"Only used for ",(0,o.kt)("inlineCode",{parentName:"td"},"CustomEndpoint")," category. Pass in the URL that when polled will return 200 OK for success. API url are automatically appended with ",(0,o.kt)("inlineCode",{parentName:"td"},"{{user_address}}/checkAccess")," while checking access")))),(0,o.kt)("h2",{id:"use-case-example---token-gated-community"},"Use Case Example - Token gated community"),(0,o.kt)("h3",{id:"problem-statement"},"Problem Statement"),(0,o.kt)("p",null,"We want to create a group that whose content is not visible to anyone outside our community of $PUSH. Furthermore, we want to make sure that the group can be viewed by anyone who has at least 1 $PUSH on Ethereum or on Polygon."),(0,o.kt)("h3",{id:"solution"},"Solution"),(0,o.kt)("p",null,"Let's break down the problem statement into individual requirements"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Visibility:")," Creating a group that is not visible to anyone outside it's member is simple, we need to set up ",(0,o.kt)("inlineCode",{parentName:"p"},"private")," flag in ",(0,o.kt)("a",{parentName:"p",href:"/docs/chat/build/create-group#create-group-api"},"create group API"),"."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Group Join Permission:")," We have two criteria over here:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Criteria 1"),": User should have 1 $PUSH on Ethereum"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Criteria 2"),": User should have 1 $PUSH on Polygon")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},'// Push token on Ethereum Criteria\n{\n  "type": "PUSH", // define type that rules engine should go for\n  "category": "ERC20", // define it\'s ERC20 token that you want to check, supports ERC721 as well\n  "subcategory": "holder", // define if you are checking \'holder\' or \'owner\'\n  "data": { \n    "contract": "eip155:1:0xf418588522d5dd018b425E472991E52EBBeEEEEE", // $PUSH address on ETH\n    "comparison": ">=", // what comparison needs to pass\n    "amount": 1, // amount that needs to passed\n    "decimals": 18, // the decimals for the token\n  }\n}\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},'// Push token on Polygon Criteria\n{\n  "type": "PUSH", // define type that rules engine should go for\n  "category": "ERC20", // define it\'s ERC20 token that you want to check, supports ERC721 as well\n  "subcategory": "holder", // define if you are checking \'holder\' or \'owner\'\n  \'data\': { \n    "contract": "eip155:137:0x58001cC1A9E17A20935079aB40B1B8f4Fc19EFd1", // $PUSH address on ETH\n    "comparison": ">=", // what comparison needs to pass\n    "amount": 1, // amount that needs to passed\n    "decimals": 18, // the decimals for the token\n  }\n}\n')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Either of criteria should be able to allow user to join the group, this means that the condition's ",(0,o.kt)("strong",{parentName:"li"},"namespace")," to use to combine these criterias would be ",(0,o.kt)("inlineCode",{parentName:"li"},"any"))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},'// decider object - \'any\' since either condition should allow access\n"any": [\n  {\n    "type": "PUSH", // define type that rules engine should go for\n    "category": "ERC20", // define it\'s ERC20 token that you want to check, supports ERC721 as well\n    "subcategory": "holder", // define if you are checking \'holder\' or \'owner\'\n    "data": { \n      "contract": "eip155:137:0x58001cC1A9E17A20935079aB40B1B8f4Fc19EFd1", // $PUSH address on ETH\n      "comparison": ">=", // what comparison needs to pass\n      "amount": 1, // amount that needs to passed\n      "decimals": 18, // the decimals for the token\n    }\n  },\n  {\n    "type": "PUSH", // define type that rules engine should go for\n    "category": "ERC20", // define it\'s ERC20 token that you want to check, supports ERC721 as well\n    "subcategory": "holder", // define if you are checking \'holder\' or \'owner\'\n    "data": { \n      "contract": "eip155:137:0x58001cC1A9E17A20935079aB40B1B8f4Fc19EFd1", // $PUSH address on ETH\n      "comparison": ">=", // what comparison needs to pass\n      "amount": 1, // amount that needs to passed\n      "decimals": 18, // the decimals for the token\n    }\n  }\n]\n')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Since there are no other conditions that are required, create the entire rules object, conditions only has one condition in entry so namespace for ",(0,o.kt)("inlineCode",{parentName:"li"},"conditions")," doesn't matter but to keep things clear, we will mark it as ",(0,o.kt)("inlineCode",{parentName:"li"},"all"))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},'  "rules": {\n    "entry": { // permission object\n      "conditions": { // conditions object\n        "any": [ // conditions namespace decider - Either group owner / admin invites the user or the user has $PUSH on Ethereum or Polygon\n          { // decider 1 - If admin or owner invites someone\n            "any": [ \n              { // criteria 1\n                "type": "PUSH",\n                "category": "INVITE",\n                "subcategory": "DEFAULT",\n                "data": {\n                    "inviterRoles": [\n                        "ADMIN",\n                        "OWNER"\n                    ]\n                }\n              }\n            ]\n          },\n          {\n            "any": [ // decider 2 - If user has $PUSH on Ethereum or on Polygon\n              { // criteria object\n                "type": "PUSH", // define type that rules engine should go for\n                "category": "ERC20", // define it\'s ERC20 token that you want to check, supports ERC721 as well\n                "subcategory": "holder", // define if you are checking \'holder\' or \'owner\'\n                "data": { \n                  "contract": "eip155:137:0x58001cC1A9E17A20935079aB40B1B8f4Fc19EFd1", // $PUSH address on ETH\n                  "comparison": ">=", // what comparison needs to pass\n                  "amount": 1, // amount that needs to passed\n                  "decimals": 18, // the decimals for the token\n                }\n              },\n              { // criteria object\n                "type": "PUSH", // define type that rules engine should go for\n                "category": "ERC20", // define it\'s ERC20 token that you want to check, supports ERC721 as well\n                "subcategory": "holder", // define if you are checking \'holder\' or \'owner\'\n                "data": { \n                  "contract": "eip155:137:0x58001cC1A9E17A20935079aB40B1B8f4Fc19EFd1", // $PUSH address on ETH\n                  "comparison": ">=", // what comparison needs to pass\n                  "amount": 1, // amount that needs to passed\n                  "decimals": 18, // the decimals for the token\n                }\n              }\n            ]\n          }\n        ]\n      }\n    }\n    // since we are not defining chat permissions, it means that any user who is part of the group can chat\n  }\n')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Finally pass this rules object into the group that we are creating using the ",(0,o.kt)("a",{parentName:"li",href:"/docs/chat/build/create-group"},"create group API call"),".")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},'  // Creating your token gated community\n  const createTokenGatedGroup = await userAlice.chat.group.create(\'Push Community\', {\n    description: \'Token gated web3 native chat example\', // provide short description of group\n    image: \'data:image/png;base64,iVBORw0K...\', // provide base64 encoded image\n    members: [], // not needed, rules define this, can omit\n    admins: [], // not needed as per problem statement, can omit\n    private: true,\n    "rules": {\n      "entry": { // permission object\n        "conditions": { // conditions object\n          "any": [ // conditions namespace decider - Either group owner / admin invites the user or the user has $PUSH on Ethereum or Polygon\n            { // decider 1 - If admin or owner invites someone\n              "any": [ \n                { // criteria 1\n                  "type": "PUSH",\n                  "category": "INVITE",\n                  "subcategory": "DEFAULT",\n                  "data": {\n                      "inviterRoles": [\n                          "ADMIN",\n                          "OWNER"\n                      ]\n                  }\n                }\n              ]\n            },\n            {\n              "any": [ // decider 2 - If user has $PUSH on Ethereum or on Polygon\n                { // criteria object\n                  "type": "PUSH", // define type that rules engine should go for\n                  "category": "ERC20", // define it\'s ERC20 token that you want to check, supports ERC721 as well\n                  "subcategory": "holder", // define if you are checking \'holder\' or \'owner\'\n                  "data": { \n                    "contract": "eip155:137:0x58001cC1A9E17A20935079aB40B1B8f4Fc19EFd1", // $PUSH address on ETH\n                    "comparison": ">=", // what comparison needs to pass\n                    "amount": 1, // amount that needs to passed\n                    "decimals": 18, // the decimals for the token\n                  }\n                },\n                { // criteria object\n                  "type": "PUSH", // define type that rules engine should go for\n                  "category": "ERC20", // define it\'s ERC20 token that you want to check, supports ERC721 as well\n                  "subcategory": "holder", // define if you are checking \'holder\' or \'owner\'\n                  "data": { \n                    "contract": "eip155:137:0x58001cC1A9E17A20935079aB40B1B8f4Fc19EFd1", // $PUSH address on ETH\n                    "comparison": ">=", // what comparison needs to pass\n                    "amount": 1, // amount that needs to passed\n                    "decimals": 18, // the decimals for the token\n                  }\n                }\n              ]\n            }\n          ]\n        }\n      }\n      // since we are not defining chat permissions, it means that any user who is part of the group can chat\n    }\n  });\n')),(0,o.kt)("h2",{id:"token-gated-group-and-send-message-example"},"Token gated group and send message example"),(0,o.kt)("p",null,"Below is an advance version of gated controls that are applied to both ",(0,o.kt)("inlineCode",{parentName:"p"},"entry")," to the group as well as sending ",(0,o.kt)("inlineCode",{parentName:"p"},"chat")," in the group."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},'  // We are going to create a group that is:\n  // Private - All conversations in this group is encrypted and visible only to members of the group\n  // Gated entry by either of two rules \n  // Gated entry - Rule 1 - It takes 10 $XYZ token on Ethereum or on Polygon to join the group\n  // Gated chat by rule of having $1000 XYZ on Ethereum token to allow sending chat in the group\n  const myTokenGatedGroup = await userAlice.chat.group.create(\'BRB Chat\', {\n    description: \'This is your DAO community native web3 chat\', // provide short description of group\n    image: \'data:image/png;base64,iVBORw0K...\', // provide base64 encoded image\n    members: [\'0x123...\', \'0xABC...\', \'eip155:0x754...\'], // see types of recipient to learn more\n    admins: [\'nft:eip155:5:0x42af3147f17239341477113484752D5D3dda997B:2:1683058528\'], // NFT addresses are supported as well\n    private: true, // ensures chat within group is encrypted and is only visible to members of the group\n    rules: { // define rules to gate different permissions of the group, ie: joining group or sending messages\n      "entry": { // define condition for joining the group\n        "conditions": { // set of all conditions that should be fulfilled to join the group\n          "any": [ \n            {\n              "any": [ // set decider to \'any\', if \'and\' then all rules need to be fulfilled\n                { // define criteria 1\n                  "type": "PUSH",\n                  "category": "INVITE",\n                  "subcategory": "DEFAULT",\n                  "data": {\n                      "inviterRoles": [\n                          "ADMIN",\n                          "OWNER"\n                      ]\n                  }\n                }\n                { // define criteria 2\n                  type: "PUSH", // define type that rules engine should go for, currently supports PUSH or GUILD\n                  category: "ERC20", // define it\'s ERC20 token that you want to check, supports ERC721 as well\n                  subcategory: "holder", // define if you are checking \'holder\' or \'owner\'\n                  data: { // define the data check\n                    "contract": "eip155:1:0xBE18197d1c071b72fb2460B1652C96C22d40F1D9", // pass {blockchain_standard}:{chain_id}:{address} as a shorthand\n                    "comparison": ">=", // what comparison needs to pass\n                    "amount": 10 // amount that needs to passed\n                    "decimals": 18, // the decimals for the contract\n                  }\n                },\n                { // define criteria 3\n                  type: "PUSH", // define type that rules engine should go for, currently supports PUSH or GUILD\n                  category: "ERC20", // define it\'s ERC20 token that you want to check, supports ERC721 as well\n                  subcategory: "holder", // define if you are checking \'holder\' or \'owner\'\n                  data: { // define the data check\n                    "contract": "eip155:137:0xBE18197d1c071b72fb2460B1652C96C22d40F1D9", // assuming $XYZ contract address is 0xBE18197d1c071b72fb2460B1652C96C22d40F1D9\n                    "comparison": ">=", // what comparison needs to pass\n                    "amount": 10 // amount that needs to passed\n                    "decimals": 18, // the decimals for the contract\n                  }\n                }\n              ]\n            }\n          ]\n        }\n      },\n      "chat": {\n        "conditions": { // define condition for sending message in the group\n          "all": [\n            {\n              "any": [ // set decider to \'any\', if \'and\' then all rules need to be fulfilled\n                { // define criteria 1\n                  "type": "PUSH", // define type that rules engine should go for, currently supports PUSH or GUILD\n                  "category": "ERC20", // define it\'s ERC20 token that you want to check, supports ERC721 as well\n                  "subcategory": "holder", // define if you are checking \'holder\' or \'owner\'\n                  "data": { // define the data check\n                    "contract": "eip155:1:0xBE18197d1c071b72fb2460B1652C96C22d40F1D9", // pass {blockchain_standard}:{chain_id}:{address} as a shorthand\n                    "comparison": ">=", // what comparison needs to pass\n                    "amount": 1000, // amount that needs to passed\n                    "decimals": 18, // the decimals for the contract\n                  }\n                }\n              ]\n            }\n          ]\n        }\n      }\n    }\n  });\n\n')),(0,o.kt)("h2",{id:"nft-gated-group-example"},"NFT gated group example"),(0,o.kt)("p",null,"Below is an example of how to NFT gate ",(0,o.kt)("inlineCode",{parentName:"p"},"entry")," to the group."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'import { PushAPI } from \'@pushprotocol/restapi\';\nimport { ethers } from \'ethers\';\n\n// Creating a random signer from a wallet, ideally this is the wallet you will connect\nconst signer = ethers.Wallet.createRandom();\n\nconsole.log(`Signer address: ${signer.address} | Signer private key: ${signer.privateKey}`);\n\n// Initialize wallet user, pass \'prod\' instead of \'staging\' for mainnet apps\nconst userAlice = await PushAPI.initialize(signer, { env: \'staging\' });\n\n// Creating your token gated community\nconst createTokenGatedGroup = await userAlice.chat.group.create(\'Push Community\', {\n  description: \'Token gated web3 native chat example\', // provide short description of group\n  image: \'data:image/png;base64,iVBORw0K...\', // provide base64 encoded image\n  members: [], // not needed, rules define this, can omit\n  admins: [], // not needed as per problem statement, can omit\n  private: true,\n  rules: {\n    "entry": { // entry is based on conditions\n      "conditions": {\n        "any": [ // any of the decider should allow entry\n          { // decider 1 - If admin or owner invites someone\n            "any": [ \n              { // criteria 1\n                "type": "PUSH",\n                "category": "INVITE",\n                "subcategory": "DEFAULT",\n                "data": {\n                    "inviterRoles": [\n                        "ADMIN",\n                        "OWNER"\n                    ]\n                }\n              }\n            ]\n          },\n          { // decicder 2 - If wallet holds 1 NFT on polygon testnet\n            "any": [\n              { // criteria 1\n                type: "PUSH", // define type that rules engine should go for\n                category: "ERC721", // define it\'s ERC20 token that you want to check, supports ERC721 as well\n                subcategory: "holder", // define if you are checking \'holder\'\n                data: { \n                  "contract": "eip155:80001:0x9105D95577575116948F5afcF479254f49F27939",\n                  "comparison": ">=", // what comparison needs to pass\n                  "amount": 1, // amount that needs to passed\n                  "decimals": 18,\n                }\n              }\n            ]\n          }\n        ]\n      }\n    }\n  }\n});\n\nconsole.log("Chat created successfully!", createTokenGatedGroup);\n')),(0,o.kt)("h2",{id:"nft-gated-group-github-example-repo"},"NFT gated group github example repo"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/ethereum-push-notification-service/push-sdk/tree/main/packages/examples/token-gated-chat",title:"Token gated example using Push Chat"},"Follow this token gated example github")," repo to see and play with the API."))}h.isMDXComponent=!0}}]);